<% # 投稿フォーム パーシャル %>
<%= form_with(model: @micropost, html: { multipart: true }) do |f| %>

  <% # エラーメッセージ %>
  <%= render 'shared/error_messages', object: f.object %>

  <% # 画像選択 %>
  <span class="image">
    <%= f.file_field :image, accept: "image/jpeg,image/gif,image/png", id: "file-upload", style: "display: none;" %>
    <label class="custom-file-upload" for="file-upload">
      写真を選択
    </label>
    <img id="preview-image" src="#" alt="選択した画像" style="display: none" />
  </span>

  <% # 位置情報選択 %>
  <%= render 'maps/search_map' %>
  <%= f.hidden_field :lat,:value =>"緯度", id: :lat %>
  <%= f.hidden_field :lng,:value =>"経度", id: :lng %>
  
  <% # 説明入力 %>
  <div class="field">
    <%= f.text_area :content, placeholder: "説明を入力" %>
  </div>

  <%= f.submit "投稿", class: "btn btn-primary" %>
<% end %>

<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API_KEY'] %>&callback=initMap" async defer></script>
